<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.1.7.6.1. Shared &#8212; PySpice 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../static/PySpice.css" type="text/css" />
    <link rel="stylesheet" href="../../../../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../static/jquery.js"></script>
    <script type="text/javascript" src="../../../../static/underscore.js"></script>
    <script type="text/javascript" src="../../../../static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../static/hidecode.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="top" title="PySpice 0.3.0 documentation" href="../../../../index.html" />
    <link rel="up" title="3.1.7.6. NgSpice" href="../NgSpice.html" />
    <link rel="next" title="3.1.7.7. Parser" href="../Parser.html" />
    <link rel="prev" title="3.1.7.6. NgSpice" href="../NgSpice.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../Parser.html" title="3.1.7.7. Parser"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../NgSpice.html" title="3.1.7.6. NgSpice"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">PySpice 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../reference-manual.html" >3. API Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../PySpice.html" >3.1. <code class="docutils literal"><span class="pre">PySpice</span></code></a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../../Spice.html" >3.1.7. <code class="docutils literal"><span class="pre">Spice</span></code></a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="../NgSpice.html" accesskey="U">3.1.7.6. <code class="docutils literal"><span class="pre">NgSpice</span></code></a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-PySpice.Spice.NgSpice.Shared">
<span id="shared"></span><h1>3.1.7.6.1. <code class="xref py py-mod docutils literal"><span class="pre">Shared</span></code><a class="headerlink" href="#module-PySpice.Spice.NgSpice.Shared" title="Permalink to this headline">¶</a></h1>
<p>This module provides a Python interface to the Ngspice shared library described in the <em>ngspice
as shared library or dynamic link library</em> section of the Ngspice user manual.</p>
<p>In comparison to the subprocess interface, it provides an interaction with the simulator through
commands and callbacks and it enables the usage of external voltage and current source in the
circuit.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Since we don&#8217;t simulate a circuit in a fresh environment on demand, this approach is
less safe than the subprocess approach. In case of bugs within Ngspice, we can expect some side
effects like memory leaks or worse unexpected things.</p>
</div>
<p>This interface use the CFFI module to interface with the shared library. It is thus suited to run
within the Pypy interpreter which implements JIT optimisation for Python.</p>
<p>It can also be used to experiment parallel simulation as explained in the Ngspice user manual. But
it seems the Ngspice source code was designed with global variables which imply to use one copy of
the shared library by worker as explained in the manual.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This interface can strongly slow down the simulation if the input or output callbacks
is used.  If the simulation time goes wrong for you then you need to implement the callbacks at a
lower level than Python. You can have look to Pypy, Cython or a C extension module.</p>
</div>
<dl class="class">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared">
<em class="property">class </em><code class="descclassname">PySpice.Spice.NgSpice.Shared.</code><code class="descname">NgSpiceShared</code><span class="sig-paren">(</span><em>ngspice_id=0</em>, <em>send_data=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Set the <em>send_data</em> flag if you want to enable the output callback.</p>
<p>Set the <em>ngspice_id</em> to an integer value if you want to run NgSpice in parallel.</p>
<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.get_isrc_data">
<code class="descname">get_isrc_data</code><span class="sig-paren">(</span><em>current</em>, <em>time</em>, <em>node</em>, <em>ngspice_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.get_isrc_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.get_isrc_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reimplement this callback in a subclass to provide external current source.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.get_vsrc_data">
<code class="descname">get_vsrc_data</code><span class="sig-paren">(</span><em>voltage</em>, <em>time</em>, <em>node</em>, <em>ngspice_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.get_vsrc_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.get_vsrc_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reimplement this callback in a subclass to provide external voltage source.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.load_circuit">
<code class="descname">load_circuit</code><span class="sig-paren">(</span><em>circuit</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.load_circuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.load_circuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the given circuit string.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>plot_name</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the corresponding plot.</p>
</dd></dl>

<dl class="attribute">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.plot_names">
<code class="descname">plot_names</code><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.plot_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of plot names.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the simulation in the background thread and wait until the simulation is done.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_char">
<code class="descname">send_char</code><span class="sig-paren">(</span><em>message</em>, <em>ngspice_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.send_char"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_char" title="Permalink to this definition">¶</a></dt>
<dd><p>Reimplement this callback in a subclass to process logging messages from the simulator.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_data">
<code class="descname">send_data</code><span class="sig-paren">(</span><em>actual_vector_values</em>, <em>number_of_vectors</em>, <em>ngspice_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.send_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reimplement this callback in a subclass to process the vector actual values.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_init_data">
<code class="descname">send_init_data</code><span class="sig-paren">(</span><em>data</em>, <em>ngspice_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.send_init_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_init_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Reimplement this callback in a subclass to process the initial data.</p>
</dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_stat">
<code class="descname">send_stat</code><span class="sig-paren">(</span><em>message</em>, <em>ngspice_id</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#NgSpiceShared.send_stat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.send_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Reimplement this callback in a subclass to process statistic messages from the simulator.</p>
</dd></dl>

<dl class="attribute">
<dt id="PySpice.Spice.NgSpice.Shared.NgSpiceShared.simulation_type">
<code class="descname">simulation_type</code><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.NgSpiceShared.simulation_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">SimulationType</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="PySpice.Spice.NgSpice.Shared.Plot">
<em class="property">class </em><code class="descclassname">PySpice.Spice.NgSpice.Shared.</code><code class="descname">Plot</code><span class="sig-paren">(</span><em>plot_name</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a></p>
<p>This class implements a plot in a simulation output.</p>
<p>Public Attributes:</p>
<blockquote>
<div><code class="xref py py-attr docutils literal"><span class="pre">plot_name</span></code></div></blockquote>
<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Plot.branches">
<code class="descname">branches</code><span class="sig-paren">(</span><em>to_float=False</em>, <em>abscissa=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Plot.branches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Plot.branches" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Plot.elements">
<code class="descname">elements</code><span class="sig-paren">(</span><em>abscissa=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Plot.elements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Plot.elements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Plot.nodes">
<code class="descname">nodes</code><span class="sig-paren">(</span><em>to_float=False</em>, <em>abscissa=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Plot.nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Plot.nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Plot.to_analysis">
<code class="descname">to_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Plot.to_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Plot.to_analysis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="PySpice.Spice.NgSpice.Shared.Vector">
<em class="property">class </em><code class="descclassname">PySpice.Spice.NgSpice.Shared.</code><code class="descname">Vector</code><span class="sig-paren">(</span><em>name</em>, <em>type_</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>This class implements a vector in a simulation output.</p>
<p>Public Attributes:</p>
<blockquote>
<div><p><code class="xref py py-attr docutils literal"><span class="pre">data</span></code></p>
<p><code class="xref py py-attr docutils literal"><span class="pre">name</span></code></p>
<dl class="docutils">
<dt><code class="xref py py-attr docutils literal"><span class="pre">type</span></code></dt>
<dd>cf. <cite>NgSpiceShared.simulation_type</cite></dd>
</dl>
</div></blockquote>
<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Vector.is_branch_current">
<code class="descname">is_branch_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Vector.is_branch_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Vector.is_branch_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Vector.is_voltage_node">
<code class="descname">is_voltage_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Vector.is_voltage_node"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Vector.is_voltage_node" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="PySpice.Spice.NgSpice.Shared.Vector.simplified_name">
<code class="descname">simplified_name</code><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Vector.simplified_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="PySpice.Spice.NgSpice.Shared.Vector.to_waveform">
<code class="descname">to_waveform</code><span class="sig-paren">(</span><em>abscissa=None</em>, <em>to_real=False</em>, <em>to_float=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#Vector.to_waveform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Vector.to_waveform" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../../Probe/WaveForm.html#module-PySpice.Probe.WaveForm" title="PySpice.Probe.WaveForm"><code class="xref py py-obj docutils literal"><span class="pre">PySpice.Probe.WaveForm</span></code></a> instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="PySpice.Spice.NgSpice.Shared.Vector.unit">
<code class="descname">unit</code><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.Vector.unit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="PySpice.Spice.NgSpice.Shared.ffi_string_utf8">
<code class="descclassname">PySpice.Spice.NgSpice.Shared.</code><code class="descname">ffi_string_utf8</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/PySpice/Spice/NgSpice/Shared.html#ffi_string_utf8"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#PySpice.Spice.NgSpice.Shared.ffi_string_utf8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../NgSpice.html"
                        title="previous chapter">3.1.7.6. <code class="docutils literal"><span class="pre">NgSpice</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../Parser.html"
                        title="next chapter">3.1.7.7. <code class="docutils literal"><span class="pre">Parser</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/api/PySpice/Spice/NgSpice/Shared.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../Parser.html" title="3.1.7.7. Parser"
             >next</a> |</li>
        <li class="right" >
          <a href="../NgSpice.html" title="3.1.7.6. NgSpice"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">PySpice 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../reference-manual.html" >3. API Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../PySpice.html" >3.1. <code class="docutils literal"><span class="pre">PySpice</span></code></a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../../Spice.html" >3.1.7. <code class="docutils literal"><span class="pre">Spice</span></code></a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="../NgSpice.html" >3.1.7.6. <code class="docutils literal"><span class="pre">NgSpice</span></code></a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Fabrice Salvaire.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>